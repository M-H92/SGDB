<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <script type="module" src="../../scripts/addNavbar.js"></script>
  <script type="module" src="../../scripts/syntaxHighlighting.js"></script>
  <link rel="stylesheet" href="../../ressources/style.css" />
</head>

<body>
  <main id="mainElement">
    <h1>QCM de fin de module</h1>
    <ol>
      <li>Introduction</li>
      <li>Diagramme de base de données</li>
      <li>QCM</li>
      <!-- <li>Conclusion</li> -->
    </ol>
    <hr>
    <h2 id="introduction">Introduction</h2>
    <p>Ci-dessous, un QCM reprenant la plupart des concepts vu jusqu'à présent dans ce cours. <br>
      Essayez de répondre au maximum de question sans vous référencer au cours
    </p>
    <h2 id="diagramme-de-base-de-donnees">Diagramme de base de données</h2>
    <img src="../../ressources/img/maisonMedicale.drawio.png" alt="database-diagram" style="width: 100%;">
    <h2 id="qcm">QCM</h2>
    <!-- <p id="question-relation-one-to-many">
      Trouvez toutes les relations correspondant à une relation 1..n (ou 0..n) dans ces propositions :
    </p> -->
    <!-- <ul id="proposition-question-relation-one-to-many">
      <li>1) personne - praticien</li>
      <li>2) praticien - patient</li>
      <li>3) patient - praticien</li>
      <li>4) maison_medicale - conges</li>
    </ul> -->
    <!-- <fieldset id="fieldset-relation-one-to-many">
      <legend>
        Choisir une unique réponses
      </legend>
      <div>
        <input id="answer-1-relation-one-to-many" type="checkbox" name="relation-one-to-many">
        <label for="answer-1-relation-one-to-many">
          Toutes les propositions.
        </label>
      </div>
      <div>
        <input id="answer-2-relation-one-to-many" type="checkbox" name="relation-one-to-many">
        <label for="answer-2-relation-one-to-many">
          Aucune des propositions
        </label>
      </div>
      <div>
        <input id="answer-3-relation-one-to-many" type="checkbox" name="relation-one-to-many">
        <label for="answer-3-relation-one-to-many">
          Les propositions 1, 2 et 3
        </label>
      </div>
      <div>
        <input id="answer-4-relation-one-to-many" type="checkbox" name="relation-one-to-many">
        <label for="answer-4-relation-one-to-many">
          Les propositions 1 et 3
        </label>
      </div>
      <div>
        <input id="answer-5-relation-one-to-many" type="checkbox" name="relation-one-to-many">
        <label for="answer-5-relation-one-to-many">Les propositions 1, 2 et 4</label>
      </div>
    </fieldset> -->
    <!-- <h2>conclusion</h2> -->
  </main>
</body>
<script>
  const QCMElement = [
    {
      id: "1",
      difficulte: 1,
      question: "Trouvez toutes les relations correspondant à une relation n..n dans ces propositions :",
      codeSnippets: [],
      propositions: [
        "1) praticien - specialite_medicale",
        "2) praticien - maison_medicale",
        "3) patient - dossier_medical",
        "4) praticien - conges"
      ],
      reponses: [
        { texte: "Toutes les propositions.", valeur: false },
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "Les propositions 1 et 2.", valeur: true },
        { texte: "Les propositions 2 et 3.", valeur: false },
        { texte: "Les propositions 3 et 4.", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "2",
      difficulte: 1,
      codeSnippets: [],
      question: "Trouvez toutes les relations correspondant à une relation 1..1 (ou 0..1) dans ces propositions :",
      propositions: [
        "1) personne - patient",
        "2) patient - patient",
        "3) patient - praticien",
        "4) dossier_medical - patient",
        "5) praticien - specialite_medicale",
      ],
      reponses: [
        { texte: "Toutes les propositions.", valeur: false },
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "Les propositions 1, 2 et 4.", valeur: false },
        { texte: "Les propositions 1 et 2.", valeur: false },
        { texte: "Les propositions 4 et 5.", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "3",
      difficulte: 1,
      codeSnippets: [],
      question: "Trouvez toutes les relations correspondant à une relation 1..n (ou 0..n) dans ces propositions :",
      propositions: [
        "1) praticien - conge",
        "2) dossier_medicale - patient",
        "3) patient - personne",
      ],
      reponses: [
        { texte: "Toutes les propositions.", valeur: false },
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "Uniquement la 1", valeur: true },
        { texte: "Uniquement la 2", valeur: false },
        { texte: "Uniquement la 3", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "4",
      difficulte: 1,
      codeSnippets: [],
      question: "Deux liens relient directement patient et personne : expliquez",
      propositions: [
      ],
      reponses: [
        { texte: "Il s'agit d'une erreur, cela semble incohérent", valeur: false },
        { texte: "Un patient peut être une personne, mais l'inverse est aussi vrai", valeur: false },
        { texte: "Deux relations de FK existent entre patient et personne", valeur: true },
        { texte: "Les deux relations étant nullable, elles s'additionnent en relation non nullable", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "5",
      difficulte: 1,
      codeSnippets: [],
      question: "Sur base du schéma, déduisez qui peut insérer un rendez-vous en base de données",
      propositions: [
      ],
      reponses: [
        { texte: "Il est impossible de déduire ça du schéma", valeur: true },
        { texte: "Toute personne", valeur: false },
        { texte: "Tout praticien", valeur: false },
        { texte: "Tout patient", valeur: false },
        { texte: "Tout praticien lié à une maison médicale et uniquement pour cette maison médicale", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "6",
      difficulte: 1,
      codeSnippets: [],
      question: "Sur base du schéma, un praticien peut-il avoir plusieurs spécialités?",
      propositions: [
      ],
      reponses: [
        { texte: "Il est impossible de déduire ça du schéma", valeur: false },
        { texte: "Oui", valeur: true },
        { texte: "Non", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "7",
      difficulte: 1,
      codeSnippets: [],
      question: "Laquelle de ces conditions permet de récupérer un praticien n'ayant plus de contrat actif au jour d'aujourd'hui",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions suivantes.", valeur: true },
        { texte: "Toutes les propositions suivantes.", valeur: false },
        { texte: "WHERE praticien.fin_contrat is null", valeur: false },
        { texte: "WHERE praticien.fin_contrat is not null", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "8",
      difficulte: 1,
      codeSnippets: [],
      question: "Laquelle de ces PK est auto incrémentée",
      propositions: [
        "1) personne.identifiant_interne",
        "2) patient.identifiant_interne",
        "3) praticien.identifiant_praticien",
      ],
      reponses: [
        { texte: "Toutes les propositions.", valeur: false },
        { texte: "Aucune des propositions.", valeur: true },
        { texte: "Au moins la proposition 3", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "9",
      difficulte: 1,
      codeSnippets: [],
      question: "Strictement selon le diagramme, un patient peut-il avoir plusieurs rendez-vous le même jour?",
      propositions: [
        "1) Oui, mais avec un praticien différent",
        "2) Oui, mais avec une heure de début différente",
        "3) Oui, mais avec une heure de fin différente",
        "4) Oui, mais uniquement si le praticien, l'heure de début et l'heure de fin sont toutes strictement différentes",
      ],
      reponses: [
        { texte: "Toutes les propositions.", valeur: false },
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "Les propositions 1, 2 et 3", valeur: false },
        { texte: "Les propositions 1 et 2", valeur: false },
        { texte: "Les propositions 2 et 3", valeur: false },
        { texte: "Uniquement la proposition 4", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "10",
      difficulte: 1,
      codeSnippets: [],
      question: "Deux maisons médicales peuvent-elle avoir le même nom?",
      propositions: [
      ],
      reponses: [
        { texte: "Oui", valeur: false },
        { texte: "Non", valeur: false },
        { texte: "Uniquement si les autres informations permettent de les distinguer", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "11",
      difficulte: 1,
      codeSnippets: [
        `-- A
CREATE DATABASE db_maison_medical;`,
        `-- B
CREATE DATABASE db_maison_medical(EMPTY);`,
        `-- C
CREATE DATABASE db_maison_medical(
	TABLE personne,
	TABLE patient,
	-- code omis par clarté
);`,
        `-- D
CREATE DATABASE db_maison_medical
  WITH TABLES(
	TABLE personne,
	-- code omis par clarté)
);`
      ],
      question: "Sélectionnez là ou les requêtes valides pour créer une base de données",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "A", valeur: true },
        { texte: "B", valeur: false },
        { texte: "C", valeur: false },
        { texte: "D", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "12",
      difficulte: 1,
      codeSnippets: [
        `
CREATE TABLE dossier_medical(
  identifiant_patient varchar(32),
  digital boolean,
  access varchar(562)
);`
      ],
      question: "Par rapport à la requête suivante, cocher la ou les bonnes réponses",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions", valeur: false },
        { texte: "La table est créée", valeur: true },
        { texte: "Les types sont correctement définis", valeur: true },
        { texte: "La primary key est assignée automatiquement car une colonne contient 'identifiant'", valeur: false },
        { texte: "La foreign key est assignée automatiquement car une colonne contient 'identifiant' suivi d'un nom de table", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "13",
      difficulte: 1,
      codeSnippets: [],
      question: "Considérant les relations décrites sur le schéma, supprimer la table dossier_medical aura pour effet de",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "N'aura pas d'impacte sur les données de la table patient", valeur: false },
        { texte: "Supprimer toutes les données de la table patient par 'cascade'", valeur: false },
        { texte: "Supprimer les patient de la table patient par 'cascade', mais uniquement si ils ont un dossier médical", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "14",
      difficulte: 1,
      codeSnippets: [
        `-- A
CREATE TABLE dossier_medical(
  identifiant_patient varchar(32) PRIMARY KEY,
  -- reste des colonnes
); `,
        `-- B
CREATE TABLE dossier_medical(
  identifiant_patient varchar(32),
  -- reste des colonnes
  PRIMARY KEY(identifiant_patient)
);`,
        `-- C
CREATE TABLE dossier_medical(
  identifiant_patient varchar(32),
  -- reste des colonnes
);
ALTER TABLE dossier_medical
ADD PRIMARY KEY(identifiant_patient);`,
      ],
      question: "Parmis les reqûetes suivantes, lesquelles permettent de créer la table dossier_medical ainsi que sa clé primaire",
      propositions: [
      ],
      reponses: [
        { texte: "Toutes les requêtes", valeur: true },
        { texte: "Aucune des requêtes", valeur: false },
        { texte: "La requête A", valeur: false },
        { texte: "La requête B", valeur: false },
        { texte: "La requête C", valeur: false },
        { texte: "La requête A ainsi que la C", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "15",
      difficulte: 1,
      codeSnippets: [
        `ALTER TABLE public.dossier_medical SWITCH CONSTRAINT dossier_medical_pkey
FROM dossier_medical.digital TO dossier_medical.identifiant_patient;`
      ],
      question: "Par erreur, la PK (dossier_medical_pkey) de la table dossier_medical a été initialisée sur la colonne 'digital'. On souhaite corriger cette erreur avec la requête suivante. Cochez la ou les bonnes réponses.",
      propositions: [
      ],
      reponses: [
        { texte: "La contrainte de PK est correctement passée de la colonne digital à la colonne identifiant_patient", valeur: false },
        { texte: "La contrainte de PK n'est pas correctement modifiée. La colonne FROM et la colonne TO doivent avoir le même type", valeur: false },
        { texte: "La contrainte de PK n'est pas correctement modifiée. On ne peut pas modifier une contrainte de PRIMARY KEY", valeur: false },
        { texte: "La contrainte de PK n'est pas correctement modifiée. Erreur de syntaxe", valeur: true },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "16",
      difficulte: 1,
      codeSnippets: [
        `ALTER TABLE public.dossier_medical DROP CONSTRAINT dossier_medical_pkey;
ALTER TABLE dossier_medical ADD PRIMARY KEY(identifiant_patient);`
      ],
      question: "Par erreur, la PK (dossier_medical_pkey) de la table dossier_medical a été initialisée sur la colonne 'digital'. On souhaite corriger cette erreur avec les 2 requêtes suivantes. Cochez la ou les bonnes réponses.",
      propositions: [
      ],
      reponses: [
        { texte: "La contrainte de PK est correctement passée de la colonne digital à la colonne identifiant_patient", valeur: true },
        { texte: "La contrainte de PK n'est pas correctement modifiée. La PRIMARY KEY doit être retirée et réappliquée dans la même requête pour ne pas compremettre l'intégrité des données.", valeur: false },
        { texte: "La contrainte de PK n'est pas correctement modifiée. On ne peut pas modifier une contrainte de PRIMARY KEY", valeur: false },
        { texte: "La contrainte de PK n'est pas correctement modifiée. Erreur de syntaxe", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "17",
      difficulte: 1,
      codeSnippets: [
        `-- A
CREATE TABLE conge(
  identifiant_praticien varchar(32),
  date_debut date,
  -- reste des colonnes
  PRIMARY KEY(identifiant_praticien, date_debut)
);`,
        `-- B
CREATE TABLE conge(
  identifiant_praticien varchar(32) PRIMARY KEY,
  date_debut date PRIMARY KEY,
  -- reste des colonnes
);`
      ],
      question: "Pour les requêtes suivantes cocher la ou les bonnes propositions",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions suivantes", valeur: false },
        { texte: "La requête A permet de créer une table 'conge' avec une clé primaire sur 'identifiant_praticien' et 'date_debut' ", valeur: true },
        { texte: "La requête B permet de créer une table 'conge' avec une clé primaire sur 'identifiant_praticien' et 'date_debut' ", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "18",
      difficulte: 1,
      codeSnippets: [
        `CREATE DATABASE conge(
  identifiant_praticien varchar(32),
  date_debut date,
  date_fin date,
  statut varchar(32),
  PRIMARY KEY(identifiant_praticien, date_debut)
);`
      ],
      question: "Pour créer la table 'conge', cette requête est utilisée. Quelle en sera le résultat?",
      propositions: [],
      reponses: [
        { texte: "Aucune des propositions suivantes", valeur: false },
        { texte: "Erreur de type", valeur: false },
        { texte: "Erreur de contrainte de clé primaire", valeur: false },
        { texte: "Erreur de syntaxe", valeur: true },
        { texte: "Création de la table 'conge'", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "19",
      difficulte: 2,
      codeSnippets: [],
      question: "Considérant la table praticien déjà créée et avec la clé primaire renseignée sur le diagramme. Je souhaite ajouter une clé primaire sur la colonne debut_contrat. Sélectionnez la ou les bonnes propositions",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions suivantes.", valeur: false },
        { texte: "Impossible d'ajouter la clé : il ne peut y avoir qu'une clé primaire par table", valeur: true },
        { texte: "Impossible d'ajouter la clé : type incohérent", valeur: false },
        { texte: "Il est possible que cela fonctionne ou pas. Cela dépend des données de la table.", valeur: false },
        { texte: "La clé est ajoutée car le type de la colonne n'est pas nullable. L'intégrité des données est assurée.", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "20",
      difficulte: 2,
      codeSnippets: [],
      question: `Par simplicité, je souhaite modifier la clé primaire de la table 'praticien'. 
      Cochez la ou les propositions valides.
      On considère que je ne fais strictement que ces 3 étapes et dans cet ordre`,
      propositions: [
        `1) Je retire la clé actuelle,`,
        `2) Je rajoute une colonne 'id' de type 'int' `,
        `3) Je crée une contrainte de primary key sur id. `,
      ],
      reponses: [
        { texte: "Aucune des propositions suivantes.", valeur: false },
        { texte: "Erreur lors du retrait de la clé", valeur: false },
        { texte: "Erreur lors de l'ajout de la colonne", valeur: false },
        { texte: "Erreur lors de l'ajout de la contrainte de clé primaire", valeur: true },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "21",
      difficulte: 2,
      codeSnippets: [],
      question: "Considérant la table praticien déjà créée et sans clé primaire. Je souhaite ajouter une clé primaire sur la colonne debut_contrat. Sélectionnez la ou les bonnes propositions",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions suivantes.", valeur: false },
        { texte: "Impossible d'ajouter la clé : type incohérent", valeur: false },
        { texte: "Il est possible que cela fonctionne ou pas. Cela dépend des données de la table.", valeur: true },
        { texte: "La clé est ajoutée car le type de la colonne n'est pas nullable. L'intégrité des données est assurée.", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "22",
      difficulte: 1,
      codeSnippets: [`CREATE TABLE personne(
  identifiant_interne varchar(32) PRIMARY KEY,
  prenom varchar(32),
  nom varchar(32),
  telephone varchar(32)
);`],
      question: "Considérant que la table 'personne' n'est pas encore créée, cochez la ou les propositions valides pour la requête suivante.",
      propositions: [],
      reponses: [
        { texte: "Aucune des propositions suivantes.", valeur: true },
        { texte: "Erreur de syntaxe", valeur: false },
        { texte: "Erreur de type", valeur: false },
        { texte: "Erreur dans la définition de la contrainte de clé primaire", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "23",
      difficulte: 1,
      codeSnippets: [
        `-- A
ALTER TABLE praticien ALTER COLUMN debut_contrat SET NOT NULL;`,
        `-- B
ALTER TABLE praticien ALTER COLUMN fin_contrat SET NULL;`
      ],
      question: "Considérant la table praticien d'écrite dans le diagramme, sélectionnez laquelle de ces requêtes est correcte",
      propositions: [
      ],
      reponses: [
        { texte: "Toutes les propositions.", valeur: false },
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "La requête A", valeur: true },
        { texte: "La requête B", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "24",
      difficulte: 1,
      codeSnippets: [
        `ALTER TABLE praticien 
  ADD CONSTRAINT fk_praticien_personne FOREIGN KEY (identifiant_praticien) 
  REFERENCES personne (identifiant_interne);`
      ],
      question: "Après avoir défini cette contrainte de clé étrangère, quel aura l'impacte de la suppression d'un 'praticien'?",
      propositions: [
      ],
      reponses: [
        { texte: "Erreur : impossible de supprimer le praticien, il faut passer par la personne liée", valeur: false },
        { texte: "Un praticien est supprimé", valeur: true },
        { texte: "Un praticien et la personne liée sont supprimés", valeur: false },
        { texte: "Une personne est supprimée", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "25",
      difficulte: 1,
      codeSnippets: [
        `ALTER TABLE praticien 
  ADD CONSTRAINT fk_praticien_personne FOREIGN KEY (identifiant_praticien) 
  REFERENCES personne (identifiant_interne);`
      ],
      question: "Cochez toutes les propositions 'possibles' à la suppression d'une 'personne' après avoir défini cette contrainte de clé étrangère",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions suivantes", valeur: true },
        { texte: "Erreur, impossible de supprimer la personne", valeur: true },
        { texte: "Suppression de la personne", valeur: true },
        { texte: "Suppression d'un praticien", valeur: true },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "26",
      difficulte: 1,
      codeSnippets: [],
      question: "Lors de la création d'une clé étrangère, quelle comportement 'ON DELETE' est appliqué par défaut",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions.", valeur: true },
        { texte: "CASCADE", valeur: false },
        { texte: "RESTRICT", valeur: false },
        { texte: "SET DEFAULT", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "27",
      difficulte: 1,
      codeSnippets: [],
      question: "Lors de la création d'une clé étrangère, quelle comportement 'ON UPDATE' est appliqué par défaut",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "SET NULL", valeur: false },
        { texte: "THROW", valeur: false },
        { texte: "NO ACTION", valeur: true },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "28",
      difficulte: 1,
      codeSnippets: [
        `ALTER TABLE praticien 
  ADD CONSTRAINT fk_praticien_personne FOREIGN KEY (identifiant_praticien) 
  REFERENCES personne (identifiant_interne);
ALTER TABLE praticien 
  ADD CONSTRAINT fk_patient_personne FOREIGN KEY (identifiant_interne) 
  REFERENCES personne (identifiant_interne);`
      ],
      question: "Cochez la ou les informations correctes après application du code suivant",
      propositions: [
      ],
      reponses: [
        { texte: "Une personne peut exister sans être un praticien, mais elle doit être un patient", valeur: false },
        { texte: "Une personne peut exister sans être un patient, mais elle doit alors être un praticien", valeur: false },
        { texte: "Une personne peut exister sans être ni un praticien, ni un patient", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "29",
      difficulte: 1,
      codeSnippets: [
        `-- A
ALTER TABLE patient ADD COLUMN inscrit_maison_medical boolean;`,
        `-- B
UPDATE TABLE patient ADD COLUMN inscrit_maison_medical boolean;`,
        `-- C
MODIFY TABLE patient ADD COLUMN inscrit_maison_medical boolean;`,
      ],
      question: "Considérant que la table 'patient' a été créée sans la colonne 'inscrit_maison_medicale', quelle requête permet d'ajouter cette colonne?",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "La requête A", valeur: false },
        { texte: "La requête B", valeur: false },
        { texte: "La requête C", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    {
      id: "30",
      difficulte: 1,
      codeSnippets: [],
      question: "Considérant que la table 'patient' a été créée sans la colonne 'inscrit_maison_medicale', on tente de l'ajouter en modifiant par après. Cochez là ou les bonnes réponses",
      propositions: [
      ],
      reponses: [
        { texte: "Aucune des propositions.", valeur: false },
        { texte: "Impossible d'ajouter une colonne dans une table existante. Il faut la supprimer et la créer avec toutes les colonnes", valeur: false },
        { texte: "Il est possible de rajouter cette nouvelle colonne, mais, pour chaque ligne de la table, une valeur [null] sera attribuée à la nouvelle colonne", valeur: true },
        { texte: "Il est possible de rajouter cette nouvelle colonne, mais elle n'entre en compte que pour les lignes insérées par après", valeur: false },
      ],
      nbrReponseCorrecte: () => {
        return this.reponses.filter(p => p.valeur === true).length;
      }
    },
    // {
    //   id: "31",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "32",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "33",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "34",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "35",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "36",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "37",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "38",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "39",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "40",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "41",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "42",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "43",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "44",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
    // {
    //   id: "45",
    //   difficulte: 1,
    //   codeSnippets: [],
    //   question: "",
    //   propositions: [
    //     "1) ",
    //     "2) ",
    //     "3) ",
    //     "4) ",
    //     "5) ",
    //   ],
    //   reponses: [
    //     { texte: "Toutes les propositions.", valeur: false },
    //     { texte: "Aucune des propositions.", valeur: false },
    //     { texte: "", valeur: false },
    //   ],
    //   nbrReponseCorrecte: () => {
    //     return this.reponses.filter(p => p.valeur === true).length;
    //   }
    // },
  ]

  const QCMElementSet = new Set(QCMElement.map(e => e.id));
  if (QCMElementSet.size != QCMElement.length)
    console.error("duplicata dans les id du qcm")

  function populateBody() {
    const main = document.getElementById("qcm")
    QCMElement.sort((a, b) => +a > +b ? 1 : -1).forEach(e => {
      const hr = document.createElement("hr");
      hr.style.width = "75%"
      hr.style.marginTop = "16px"
      hr.style.marginBottom = "24px"
      main.after(hr);
      const element = document.createElement("p");
      element.id = `question-${e.id}`
      element.textContent = `${e.id}) ${e.question}`;
      main.after(element);

      const ul = document.createElement("ul");
      ul.id = `proposition-${e.id}`;

      const propositions = e.propositions.forEach(p => {
        let prop = document.createElement("li");
        prop.textContent = p;
        ul.appendChild(prop);
      });
      element.after(ul);

      const codeWrapper = document.createElement("div");
      codeWrapper.id = `code-snippets-${e.id}`;
      codeWrapper.classList.add("container")

      e.codeSnippets.forEach(c => {
        let pre = document.createElement("pre");
        pre.textContent = c;
        pre.classList.add("code-snippet")
        pre.classList.add("block")
        codeWrapper.appendChild(pre);
      })
      element.after(codeWrapper)

      const fieldset = document.createElement("fieldset");
      fieldset.id = `fieldset-${e.id}`
      const legend = document.createElement("legend");
      if (e.nbrReponseCorrecte === 1)
        legend.textContent = "Choisir une unique réponse";
      else
        legend.textContent = "Choisir une ou plusieurs réponse(s)";

      let i = 1;
      e.reponses.forEach(r => {
        const div = document.createElement("div");
        const reponse = document.createElement("input");
        reponse.type = "checkbox"
        reponse.id = `answer-${i}-${e.id}`
        reponse.name = e.id
        const label = document.createElement("label");
        label.textContent = `${i}) ${r.texte}`;
        label.htmlFor = reponse.id;
        div.appendChild(reponse);
        div.appendChild(label);
        fieldset.appendChild(div)
        i++;
      })
      ul.after(fieldset);
    });
  }
  populateBody();
</script>

</html>